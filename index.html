<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Intesa Vincente</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700;800&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Poppins', sans-serif;
        }

        :root {
            --primary: #1a2a6c;
            --secondary: #b21f1f;
            --accent: #fdbb2d;
            --success: #2ecc71;
            --danger: #e74c3c;
            --info: #3498db;
            --dark: #0d1426;
            --light: #f8f9fa;
        }

        body {
            background: linear-gradient(135deg, var(--primary), var(--secondary), var(--accent));
            min-height: 100vh;
            color: white;
            overflow: hidden;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
            height: 100vh;
            display: flex;
            flex-direction: column;
        }

        header {
            text-align: center;
            margin-bottom: 20px;
            padding: 20px;
            background: rgba(13, 20, 38, 0.9);
            border-radius: 20px;
            border: 3px solid var(--accent);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
        }

        h1 {
            font-size: 3rem;
            color: var(--accent);
            text-shadow: 3px 3px 6px rgba(0, 0, 0, 0.7);
            margin-bottom: 10px;
            font-weight: 800;
        }

        .subtitle {
            font-size: 1.2rem;
            color: var(--light);
            opacity: 0.9;
        }

        .game-layout {
            display: flex;
            gap: 25px;
            flex: 1;
            min-height: 0;
        }

        .team-sidebar {
            flex: 0 0 280px;
            background: linear-gradient(135deg, rgba(253, 187, 45, 0.1), rgba(26, 42, 108, 0.2));
            border-radius: 20px;
            padding: 25px;
            border: 3px solid rgba(253, 187, 45, 0.4);
            display: flex;
            flex-direction: column;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.4);
            transition: all 0.3s ease;
        }

        .team-sidebar.active {
            background: linear-gradient(135deg, rgba(46, 204, 113, 0.3), rgba(39, 174, 96, 0.2));
            border-color: var(--success);
            box-shadow: 0 0 30px rgba(46, 204, 113, 0.5);
            transform: translateY(-5px);
        }

        .team-name {
            font-size: 1.6rem;
            font-weight: 700;
            text-align: center;
            margin-bottom: 20px;
            color: var(--accent);
            padding: 15px;
            background: rgba(0, 0, 0, 0.4);
            border-radius: 15px;
            border: 2px solid var(--accent);
        }

        .team-sidebar.active .team-name {
            color: var(--success);
            border-color: var(--success);
        }

        .score {
            font-size: 2.5rem;
            font-weight: 800;
            text-align: center;
            margin: 20px 0;
            padding: 20px;
            background: rgba(0, 0, 0, 0.6);
            border-radius: 15px;
            border: 3px solid var(--accent);
            position: relative;
            overflow: hidden;
        }

        .team-sidebar.active .score {
            border-color: var(--success);
            color: var(--success);
        }

        .players-list {
            flex: 1;
            overflow-y: auto;
            background: rgba(0, 0, 0, 0.4);
            border-radius: 15px;
            padding: 15px;
            border: 2px solid rgba(255, 255, 255, 0.1);
        }

        .player-item {
            padding: 12px;
            margin: 8px 0;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            text-align: center;
            font-weight: 500;
            transition: all 0.3s ease;
        }

        .player-item:hover {
            background: rgba(255, 255, 255, 0.15);
            transform: translateX(5px);
        }

        .game-center {
            flex: 1;
            display: flex;
            flex-direction: column;
            background: rgba(13, 20, 38, 0.9);
            border-radius: 25px;
            padding: 30px;
            border: 3px solid var(--accent);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
        }

        .timer-section {
            text-align: center;
            margin-bottom: 25px;
        }

        .timer {
            font-size: 4rem;
            font-weight: 800;
            color: var(--danger);
            background: rgba(0, 0, 0, 0.7);
            padding: 25px;
            border-radius: 20px;
            border: 4px solid var(--danger);
            margin: 15px 0;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
            box-shadow: 0 0 20px rgba(231, 76, 60, 0.3);
        }

        .word-display {
            flex: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            background: linear-gradient(135deg, rgba(0, 0, 0, 0.6), rgba(0, 0, 0, 0.4));
            border-radius: 20px;
            margin: 25px 0;
            border: 4px solid var(--accent);
            position: relative;
            overflow: hidden;
        }

        .word-display::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(45deg, transparent, rgba(253, 187, 45, 0.1), transparent);
            animation: shimmer 3s infinite;
        }

        @keyframes shimmer {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }

        .word {
            font-size: 5rem;
            font-weight: 800;
            color: var(--accent);
            text-align: center;
            text-shadow: 4px 4px 8px rgba(0, 0, 0, 0.7);
            padding: 40px;
        }

        .word.hidden {
            color: transparent;
            text-shadow: none;
        }

        .controls {
            display: flex;
            gap: 20px;
            justify-content: center;
            margin-top: 25px;
        }

        button {
            padding: 18px 32px;
            font-size: 1.2rem;
            font-weight: 700;
            border: none;
            border-radius: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 12px;
            text-transform: uppercase;
            letter-spacing: 1px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }

        button:hover:not(:disabled) {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.4);
        }

        button:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none !important;
        }

        .start-btn {
            background: linear-gradient(135deg, var(--success), #27ae60);
            color: white;
        }

        .stop-btn {
            background: linear-gradient(135deg, var(--danger), #c0392b);
            color: white;
        }

        .next-btn {
            background: linear-gradient(135deg, var(--info), #2980b9);
            color: white;
        }

        .correct-btn {
            background: linear-gradient(135deg, var(--success), #27ae60);
            color: white;
            padding: 15px 25px;
            font-size: 1.1rem;
        }

        .wrong-btn {
            background: linear-gradient(135deg, var(--danger), #c0392b);
            color: white;
            padding: 15px 25px;
            font-size: 1.1rem;
        }

        .answer-controls {
            display: flex;
            gap: 20px;
            justify-content: center;
            margin-top: 20px;
        }

        .hidden {
            display: none !important;
        }

        .round-info {
            text-align: center;
            font-size: 1.4rem;
            margin-bottom: 20px;
            color: var(--accent);
            background: rgba(0, 0, 0, 0.5);
            padding: 15px;
            border-radius: 15px;
            border: 2px solid var(--accent);
            font-weight: 600;
        }

        .points-info {
            text-align: center;
            font-size: 1.3rem;
            color: var(--accent);
            background: rgba(0, 0, 0, 0.5);
            padding: 15px;
            border-radius: 15px;
            border: 2px solid var(--accent);
            margin: 15px 0;
            font-weight: 600;
        }

        .double-badge {
            background: linear-gradient(135deg, var(--info), #2980b9);
            color: white;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: 600;
            margin-left: 10px;
            animation: pulse 2s infinite;
        }

        .setup-screen {
            text-align: center;
            padding: 50px 20px;
            flex: 1;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }

        .team-setup {
            display: flex;
            gap: 40px;
            justify-content: center;
            margin: 40px 0;
        }

        .team-input {
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.1), rgba(255, 255, 255, 0.05));
            padding: 30px;
            border-radius: 20px;
            border: 3px solid var(--accent);
            width: 350px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.4);
            transition: transform 0.3s ease;
        }

        .team-input:hover {
            transform: translateY(-5px);
        }

        .team-input h3 {
            color: var(--accent);
            margin-bottom: 25px;
            font-size: 1.5rem;
            font-weight: 700;
        }

        input {
            width: 100%;
            padding: 15px;
            margin: 10px 0;
            border: none;
            border-radius: 12px;
            background: rgba(255, 255, 255, 0.95);
            font-size: 1.1rem;
            font-weight: 500;
            box-shadow: inset 0 2px 5px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
        }

        input:focus {
            outline: none;
            box-shadow: 0 0 0 3px rgba(253, 187, 45, 0.5);
            transform: scale(1.02);
        }

        .player-input {
            display: flex;
            gap: 12px;
            margin: 15px 0;
        }

        .add-player-btn {
            background: var(--info);
            color: white;
            border: none;
            border-radius: 50%;
            width: 45px;
            height: 45px;
            cursor: pointer;
            font-size: 1.3rem;
            font-weight: bold;
            transition: all 0.3s ease;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.3);
        }

        .add-player-btn:hover {
            transform: scale(1.1);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.4);
        }

        .player-list {
            margin-top: 20px;
            max-height: 250px;
            overflow-y: auto;
            background: rgba(0, 0, 0, 0.4);
            border-radius: 12px;
            padding: 15px;
            border: 2px solid rgba(255, 255, 255, 0.1);
        }

        .player-list-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px;
            margin: 8px 0;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            transition: all 0.3s ease;
        }

        .player-list-item:hover {
            background: rgba(255, 255, 255, 0.15);
        }

        .remove-player-btn {
            background: var(--danger);
            color: white;
            border: none;
            border-radius: 50%;
            width: 28px;
            height: 28px;
            cursor: pointer;
            font-size: 0.9rem;
            transition: all 0.3s ease;
        }

        .remove-player-btn:hover {
            transform: scale(1.1);
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        .pulse {
            animation: pulse 0.5s ease-in-out;
        }

        @keyframes scoreAnimation {
            0% { transform: scale(1); opacity: 1; }
            50% { transform: scale(1.4); opacity: 0.8; }
            100% { transform: scale(1); opacity: 1; }
        }

        .score-animation {
            animation: scoreAnimation 0.5s ease-in-out;
        }

        .answering-player {
            text-align: center;
            font-size: 1.3rem;
            font-weight: 700;
            color: var(--accent);
            margin-bottom: 15px;
            padding: 12px;
            background: rgba(0, 0, 0, 0.4);
            border-radius: 10px;
            border: 2px solid var(--accent);
        }
    </style>
</head>
<body>
    <!-- Schermata di Setup -->
    <div class="container setup-screen" id="setupScreen">
        <header>
            <h1>üéØ INTESA VINCENTE</h1>
            <p class="subtitle">Pi√π difficile della tesi (ma pi√π divertente)</p>
        </header>
        
        <div class="team-setup">
            <div class="team-input">
                <h3>üèÜ SQUADRA A</h3>
                <input type="text" id="teamAName" placeholder="Nome Squadra A" value="Squadra A">
                <div class="player-input">
                    <input type="text" id="teamAPlayerInput" placeholder="Nome giocatore">
                    <button class="add-player-btn" id="addTeamAPlayer">+</button>
                </div>
                <div class="player-list" id="teamAPlayerList"></div>
            </div>
            
            <div class="team-input">
                <h3>üèÜ SQUADRA B</h3>
                <input type="text" id="teamBName" placeholder="Nome Squadra B" value="Squadra B">
                <div class="player-input">
                    <input type="text" id="teamBPlayerInput" placeholder="Nome giocatore">
                    <button class="add-player-btn" id="addTeamBPlayer">+</button>
                </div>
                <div class="player-list" id="teamBPlayerList"></div>
            </div>
        </div>
        
        <button class="start-btn" id="startGameBtn" style="padding: 20px 40px; font-size: 1.4rem; margin: 0 auto;">
            üéÆ INIZIA IL GIOCO
        </button>
    </div>

    <!-- Schermata di Gioco -->
    <div class="container hidden" id="gameScreen">
        <header>
            <h1>üéØ INTESA VINCENTE</h1>
            <div class="round-info" id="roundInfo">Turno 1 - Squadra A</div>
        </header>
        
        <div class="game-layout">
            <!-- Squadra A -->
            <div class="team-sidebar" id="teamASidebar">
                <div class="team-name" id="displayTeamA">Squadra A</div>
                <div class="score" id="scoreA">0 Punti</div>
                <div class="players-list" id="teamAPlayersList"></div>
            </div>
            
            <!-- Area Centrale di Gioco -->
            <div class="game-center">
                <div class="timer-section">
                    <div class="timer" id="timer">60</div>
                    <div class="points-info" id="pointsInfo">
                        Punti in palio: 1 punto
                        <span class="double-badge hidden" id="doubleBadge">RADDOPPIO!</span>
                    </div>
                </div>
                
                <div class="word-display">
                    <div class="word hidden" id="currentWord">BORSETTA</div>
                </div>
                
                <div class="controls">
                    <button class="start-btn" id="startTurnBtn">
                        ‚ñ∂Ô∏è INIZIA TURNO
                    </button>
                    <button class="stop-btn" id="stopTimerBtn" disabled>
                        ‚è∏Ô∏è STOP TEMPO
                    </button>
                    <button class="next-btn" id="nextWordBtn" disabled>
                        ‚è≠Ô∏è PROSSIMA PAROLA
                    </button>
                </div>
                
                <div class="answer-controls hidden" id="answerControls">
                    <div class="answering-player" id="answeringPlayer">
                        Risponde: Squadra A
                    </div>
                    <div style="display: flex; gap: 20px;">
                        <button class="correct-btn" id="correctBtn">
                            ‚úÖ ESATTA
                        </button>
                        <button class="wrong-btn" id="wrongBtn">
                            ‚ùå ERRATA
                        </button>
                    </div>
                </div>
            </div>
            
            <!-- Squadra B -->
            <div class="team-sidebar" id="teamBSidebar">
                <div class="team-name" id="displayTeamB">Squadra B</div>
                <div class="score" id="scoreB">0 Punti</div>
                <div class="players-list" id="teamBPlayersList"></div>
            </div>
        </div>
    </div>

    <script>
        // Variabili globali
        let teamAPlayers = [];
        let teamBPlayers = [];
        let scoreA = 0;
        let scoreB = 0;
        let currentTeam = 'A';
        let currentTurn = 1;
        let timeLeft = 60;
        let timerInterval;
        let gameActive = false;
        let currentWordIndex = 0;

        // Database di parole ampliato
        const words = [
            // Animali
            "ELEFANTE", "CANGURO", "DINOSAURO", "GIRAFFA", "LEOPARDO",
            "PANDA", "TIGRE", "LEONE", "ZEBRA", "IPPOPOTAMO",
            "RINOCERONTE", "GORILLA", "SCIMPANZ√â", "ORANGOTANGO", "COCCODRILLO",
            
            // Citt√†
            "ROMA", "MILANO", "NAPOLI", "FIRENZE", "VENEZIA",
            "TORINO", "BOLOGNA", "GENOVA", "PALERMO", "CATANIA",
            
            // Sport
            "CALCIO", "BASKET", "TENNIS", "NUOTO", "PALLAVOLO",
            "RUGBY", "BASEBALL", "GOLF", "SCI", "CICLISMO",
            
            // Cibo
            "PIZZA", "PASTA", "RISOTTO", "LASAGNA", "CARBONARA",
            "AMATRICIANA", "CACIOEPEPE", "OSSOBUCO", "TIRAMIS√ô", "PANNA COTTA",
            
            // Oggetti
            "BORSETTA", "TELEFONO", "COMPUTER", "TAVOLO", "SEDIA",
            "LIBRO", "QUADERNO", "PENNA", "MATITA", "OROLOGIO",
            
            // Natura
            "MONTAGNA", "OCEANO", "FIUME", "LAGO", "FORESTA",
            "DESERTO", "GIUNGLA", "VULCANO", "CASCATA", "PRATERIA",
            
            // Veicoli
            "AUTOMOBILE", "MOTOCICLETTA", "BICICLETTA", "AEREO", "TRENO",
            "NAVE", "SOTTOMARINO", "ELICOTTERO", "CAMION", "AUTOBUS",
            
            // Musica
            "CHITARRA", "PIANOFORTE", "VIOLINO", "TROMBA", "BATTERIA",
            "FLAUTO", "ARPA", "SAXOFONO", "CONTRABBASSO", "TAMBURO",
            
            // Professioni
            "MEDICO", "INGEGNERE", "ARCHITETTO", "AVVOCATO", "INSEGNANTE",
            "CUOCO", "MECCANICO", "ELETTRICISTA", "IDRAULICO", "FALEGNAME",
            
            // Tecnologia
            "SMARTPHONE", "TABLET", "NOTEBOOK", "SMARTWATCH", "DRONE",
            "ROBOT", "DRONE", "SMARTTV", "CONSOLE", "VIRTUALREALITY"
        ];

        const doublePhrases = [
            "VIGILI DEL FUOCO", "LUNA PARK", "CAPO STAZIONE", "CENTRALE OPERATIVA",
            "PARCO NAZIONALE", "BANCA D'ITALIA", "CORPO DI BALLO", "SQUADRA SPECIALE",
            "TORRE EIFFEL", "GRANDE MELA", "OCCHIALI DA SOLE", "MACCHINA FOTOGRAFICA",
            "TELEFONO CELLULARE", "COMPUTER PORTATILE", "AUTOMOBILE SPORTIVA", "MOTOCICLETTA DA CROSS",
            "PALLA DA BASKET", "CAMPO DA TENNIS", "PISCINA OLIMPICA", "PISTA DI ATLETICA"
        ];

        // Elementi DOM
        const setupScreen = document.getElementById('setupScreen');
        const gameScreen = document.getElementById('gameScreen');
        const timerDisplay = document.getElementById('timer');
        const currentWordDisplay = document.getElementById('currentWord');
        const pointsInfo = document.getElementById('pointsInfo');
        const roundInfo = document.getElementById('roundInfo');
        const doubleBadge = document.getElementById('doubleBadge');

        // Setup giocatori
        document.getElementById('addTeamAPlayer').addEventListener('click', () => addPlayer('A'));
        document.getElementById('addTeamBPlayer').addEventListener('click', () => addPlayer('B'));
        document.getElementById('startGameBtn').addEventListener('click', startGame);

        function addPlayer(team) {
            const input = document.getElementById(`team${team}PlayerInput`);
            const list = document.getElementById(`team${team}PlayerList`);
            const playerName = input.value.trim();
            
            if (playerName) {
                const players = team === 'A' ? teamAPlayers : teamBPlayers;
                players.push(playerName);
                updatePlayerList(team);
                input.value = '';
            }
        }

        function removePlayer(team, index) {
            const players = team === 'A' ? teamAPlayers : teamBPlayers;
            players.splice(index, 1);
            updatePlayerList(team);
        }

        function updatePlayerList(team) {
            const list = document.getElementById(`team${team}PlayerList`);
            const players = team === 'A' ? teamAPlayers : teamBPlayers;
            
            list.innerHTML = '';
            players.forEach((player, index) => {
                const playerItem = document.createElement('div');
                playerItem.className = 'player-list-item';
                playerItem.innerHTML = `
                    <span>${player}</span>
                    <button class="remove-player-btn" onclick="removePlayer('${team}', ${index})">√ó</button>
                `;
                list.appendChild(playerItem);
            });
        }

        function startGame() {
            // Aggiorna nomi squadre
            document.getElementById('displayTeamA').textContent = document.getElementById('teamAName').value;
            document.getElementById('displayTeamB').textContent = document.getElementById('teamBName').value;
            
            // Aggiorna liste giocatori
            updatePlayersInSidebars();
            
            // Passa alla schermata di gioco
            setupScreen.classList.add('hidden');
            gameScreen.classList.remove('hidden');
            
            // Inizializza il gioco
            initGame();
        }

        function updatePlayersInSidebars() {
            updatePlayersInSidebar('teamAPlayersList', teamAPlayers);
            updatePlayersInSidebar('teamBPlayersList', teamBPlayers);
        }

        function updatePlayersInSidebar(elementId, players) {
            const element = document.getElementById(elementId);
            element.innerHTML = '';
            players.forEach(player => {
                const playerItem = document.createElement('div');
                playerItem.className = 'player-item';
                playerItem.textContent = player;
                element.appendChild(playerItem);
            });
        }

        function initGame() {
            updateScores();
            updateActiveTeam();
            updateRoundInfo();
            currentWordDisplay.classList.add('hidden');
        }

        function updateActiveTeam() {
            document.getElementById('teamASidebar').classList.remove('active');
            document.getElementById('teamBSidebar').classList.remove('active');
            
            if (currentTeam === 'A') {
                document.getElementById('teamASidebar').classList.add('active');
            } else {
                document.getElementById('teamBSidebar').classList.add('active');
            }
            
            document.getElementById('answeringPlayer').textContent = `Risponde: ${currentTeam === 'A' ? document.getElementById('displayTeamA').textContent : document.getElementById('displayTeamB').textContent}`;
        }

        function updateScores() {
            document.getElementById('scoreA').textContent = `${scoreA} Punti`;
            document.getElementById('scoreB').textContent = `${scoreB} Punti`;
        }

        function updateRoundInfo() {
            const isDoubleRound = currentTurn === 2 || currentTurn === 4;
            const teamName = currentTeam === 'A' ? document.getElementById('displayTeamA').textContent : document.getElementById('displayTeamB').textContent;
            roundInfo.textContent = `Turno ${currentTurn} - ${teamName}`;
            
            if (isDoubleRound) {
                pointsInfo.innerHTML = `Punti in palio: <span style="color: var(--info); font-weight: 700;">2 punti</span>`;
                doubleBadge.classList.remove('hidden');
            } else {
                pointsInfo.innerHTML = `Punti in palio: <span style="color: var(--accent); font-weight: 700;">1 punto</span>`;
                doubleBadge.classList.add('hidden');
            }
        }

        function showNextWord() {
            const isDoubleRound = currentTurn === 2 || currentTurn === 4;
            
            if (isDoubleRound && currentWordIndex < doublePhrases.length) {
                currentWordDisplay.textContent = doublePhrases[currentWordIndex];
            } else if (currentWordIndex < words.length) {
                currentWordDisplay.textContent = words[currentWordIndex];
            } else {
                currentWordDisplay.textContent = "FINE PAROLE";
                endTurn();
                return;
            }
            
            currentWordDisplay.classList.remove('hidden');
            currentWordIndex++;
        }

        // Controlli di gioco
        document.getElementById('startTurnBtn').addEventListener('click', startTurn);
        document.getElementById('stopTimerBtn').addEventListener('click', stopTimer);
        document.getElementById('nextWordBtn').addEventListener('click', nextWord);
        document.getElementById('correctBtn').addEventListener('click', handleCorrectAnswer);
        document.getElementById('wrongBtn').addEventListener('click', handleWrongAnswer);

        function startTurn() {
            if (gameActive) return;
            
            gameActive = true;
            timeLeft = 60;
            timerDisplay.textContent = timeLeft;
            currentWordIndex = 0;
            
            document.getElementById('startTurnBtn').disabled = true;
            document.getElementById('stopTimerBtn').disabled = false;
            document.getElementById('nextWordBtn').disabled = false;
            document.getElementById('answerControls').classList.add('hidden');
            
            showNextWord();
            startTimer();
        }

        function startTimer() {
            timerInterval = setInterval(() => {
                timeLeft--;
                timerDisplay.textContent = timeLeft;
                
                if (timeLeft <= 0) {
                    endTurn();
                }
            }, 1000);
        }

        function stopTimer() {
            if (!gameActive) return;
            
            clearInterval(timerInterval);
            document.getElementById('answerControls').classList.remove('hidden');
            document.getElementById('stopTimerBtn').disabled = true;
        }

        function handleCorrectAnswer() {
            const isDoubleRound = currentTurn === 2 || currentTurn === 4;
            const points = isDoubleRound ? 2 : 1;
            
            if (currentTeam === 'A') {
                scoreA += points;
            } else {
                scoreB += points;
            }
            
            updateScores();
            animateScore(currentTeam);
            document.getElementById('answerControls').classList.add('hidden');
            document.getElementById('stopTimerBtn').disabled = false;
            
            showNextWord();
            startTimer();
        }

        function handleWrongAnswer() {
            const isDoubleRound = currentTurn === 2 || currentTurn === 4;
            const points = isDoubleRound ? 2 : 1;
            
            if (currentTeam === 'A' && scoreA >= points) {
                scoreA -= points;
            } else if (currentTeam === 'B' && scoreB >= points) {
                scoreB -= points;
            }
            
            updateScores();
            animateScore(currentTeam);
            document.getElementById('answerControls').classList.add('hidden');
            document.getElementById('stopTimerBtn').disabled = false;
            
            showNextWord();
            startTimer();
        }

        function animateScore(team) {
            const scoreElement = document.getElementById(team === 'A' ? 'scoreA' : 'scoreB');
            scoreElement.classList.add('score-animation');
            setTimeout(() => {
                scoreElement.classList.remove('score-animation');
            }, 500);
        }

        function nextWord() {
            showNextWord();
        }

        function endTurn() {
            clearInterval(timerInterval);
            gameActive = false;
            
            document.getElementById('startTurnBtn').disabled = false;
            document.getElementById('stopTimerBtn').disabled = true;
            document.getElementById('nextWordBtn').disabled = true;
            document.getElementById('answerControls').classList.add('hidden');
            currentWordDisplay.classList.add('hidden');
            
            // Cambia squadra
            currentTeam = currentTeam === 'A' ? 'B' : 'A';
            currentTurn++;
            
            if (currentTurn > 5) {
                currentTurn = 1;
            }
            
            updateActiveTeam();
            updateRoundInfo();
        }

        // Inizializzazione
        window.addEventListener('load', () => {
            updatePlayerList('A');
            updatePlayerList('B');
        });
    </script>
</body>
</html>
